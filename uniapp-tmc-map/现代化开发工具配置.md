# ğŸš€ ç°ä»£åŒ–å¼€å‘å·¥å…·å’Œè‡ªåŠ¨åŒ–æµç¨‹

## ğŸ“Š **å½“å‰é…ç½® vs ç°ä»£åŒ–æ–¹æ¡ˆå¯¹æ¯”**

| ç‰¹æ€§ | å½“å‰é…ç½® | ç°ä»£åŒ–æ–¹æ¡ˆ |
|------|----------|------------|
| çƒ­æ›´æ–°é€Ÿåº¦ | è¾ƒæ…¢ (3-5ç§’) | æå¿« (æ¯«ç§’çº§) |
| å¼€å‘ä½“éªŒ | åŸºç¡€ | ä¼˜ç§€ |
| é”™è¯¯æç¤º | ç®€å• | ä¸°å¯Œè¯¦ç»† |
| è°ƒè¯•åŠŸèƒ½ | æœ‰é™ | å¼ºå¤§ |
| è‡ªåŠ¨åŒ–ç¨‹åº¦ | ä½ | é«˜ |

## ğŸ”§ **æ¨èçš„ç°ä»£åŒ–å·¥å…·é“¾**

### 1. **Vite + HMR å‡çº§ç‰ˆ**

```javascript
// vite.config.js å‡çº§é…ç½®
import { defineConfig } from 'vite'
import uni from '@dcloudio/vite-plugin-uni'

export default defineConfig({
  plugins: [
    uni({
      // å¯ç”¨é«˜çº§ HMR åŠŸèƒ½
      hmr: true,
      // é¢„æ„å»ºä¼˜åŒ–
      preload: true
    })
  ],
  server: {
    hmr: {
      overlay: true,  // é”™è¯¯è¦†ç›–å±‚
      clientPort: 443 // æ”¯æŒ HTTPS
    },
    // å¿«é€Ÿåˆ·æ–°
    watch: {
      usePolling: true,
      interval: 100
    }
  },
  // æ„å»ºä¼˜åŒ–
  build: {
    rollupOptions: {
      output: {
        manualChunks: (id) => {
          if (id.includes('node_modules')) {
            return 'vendor'
          }
        }
      }
    }
  }
})
```

### 2. **Webpack Bundle Analyzer**

```bash
# å®‰è£…åˆ†æå·¥å…·
npm install --save-dev webpack-bundle-analyzer

# åˆ†æåŒ…å¤§å°
npm run build:mp-weixin --analyze
```

### 3. **ESLint + Prettier è‡ªåŠ¨åŒ–**

```javascript
// .eslintrc.js
module.exports = {
  extends: [
    '@vue/standard',
    '@vue/typescript/recommended'
  ],
  rules: {
    // è‡ªåŠ¨ä¿®å¤è§„åˆ™
    'vue/max-attributes-per-line': 'off',
    'vue/singleline-html-element-content-newline': 'off'
  }
}
```

## ğŸ³ **Docker å®¹å™¨åŒ–å¼€å‘**

### Dockerfile
```dockerfile
FROM node:18-alpine

WORKDIR /app

# å¤åˆ¶ä¾èµ–æ–‡ä»¶
COPY package*.json ./
RUN npm install

# å¤åˆ¶æºä»£ç 
COPY . .

# æš´éœ²ç«¯å£
EXPOSE 3000

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
CMD ["npm", "run", "dev:mp-weixin"]
```

### docker-compose.yml
```yaml
version: '3.8'
services:
  frontend:
    build: .
    ports:
      - "3000:3000"
    volumes:
      - ./src:/app/src
      - ./dist:/app/dist
    environment:
      - NODE_ENV=development
      - VUE_APP_API_BASE_URL=http://backend:8080
    depends_on:
      - backend
  
  backend:
    build: ../tmc-map-backend
    ports:
      - "8080:8080"
    environment:
      - SPRING_PROFILES_ACTIVE=dev
```

## ğŸ”„ **CI/CD è‡ªåŠ¨åŒ–æµç¨‹**

### GitHub Actions é…ç½®
```yaml
# .github/workflows/deploy.yml
name: è‡ªåŠ¨éƒ¨ç½²

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
    
    - name: Setup Node.js
      uses: actions/setup-node@v2
      with:
        node-version: '18'
        cache: 'npm'
    
    - name: Install dependencies
      run: npm install
    
    - name: Run tests
      run: npm test
    
    - name: Build for production
      run: npm run build:mp-weixin
    
    - name: Deploy to production
      if: github.ref == 'refs/heads/main'
      run: |
        # éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
        echo "éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ"
```

## ğŸ“¦ **ç°ä»£åŒ–åŒ…ç®¡ç†**

### 1. **pnpm æ›¿ä»£ npm**
```bash
# å®‰è£… pnpm
npm install -g pnpm

# æ›´å¿«çš„ä¾èµ–å®‰è£…
pnpm install

# æ›´å¿«çš„å¼€å‘å¯åŠ¨
pnpm dev:mp-weixin
```

### 2. **Yarn Berry (Yarn 2+)**
```bash
# å¯ç”¨ Yarn Berry
yarn set version berry

# é›¶å®‰è£…æ¨¡å¼
yarn install --mode=skip-build
```

## ğŸ› ï¸ **å¼€å‘å·¥å…·é“¾å‡çº§**

### 1. **Turborepo å•ä»“åº“ç®¡ç†**
```json
{
  "name": "tmc-map-monorepo",
  "private": true,
  "workspaces": [
    "apps/*",
    "packages/*"
  ],
  "devDependencies": {
    "turbo": "latest"
  }
}
```

### 2. **Nx å·¥ä½œç©ºé—´**
```bash
# åˆ›å»º Nx å·¥ä½œç©ºé—´
npx create-nx-workspace tmc-map --preset=react

# æ·»åŠ åº”ç”¨
nx g @nx/react:app frontend
nx g @nx/nest:app backend
```

## ğŸ“ˆ **æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–**

### 1. **Lighthouse CI**
```yaml
# lighthouse.yml
ci:
  collect:
    url:
      - 'http://localhost:3000'
  upload:
    target: 'github'
```

### 2. **Bundle åˆ†æ**
```bash
# å®‰è£…åˆ†æå·¥å…·
npm install --save-dev webpack-bundle-analyzer

# åˆ†ææ„å»ºäº§ç‰©
npm run build:mp-weixin --analyze
```

## ğŸ¯ **æ¨èçš„ç°ä»£åŒ–å‡çº§è·¯å¾„**

### é˜¶æ®µ1: åŸºç¡€ä¼˜åŒ– (1-2å¤©)
- [x] å½“å‰çš„ watch æ¨¡å¼ âœ…
- [ ] å‡çº§ Vite é…ç½®
- [ ] æ·»åŠ  ESLint + Prettier
- [ ] é…ç½® VS Code å¼€å‘ç¯å¢ƒ

### é˜¶æ®µ2: å·¥å…·é“¾å‡çº§ (3-5å¤©)
- [ ] å¼•å…¥ pnpm æˆ– Yarn
- [ ] é…ç½® TypeScript ä¸¥æ ¼æ¨¡å¼
- [ ] æ·»åŠ å•å…ƒæµ‹è¯• (Jest/Vitest)
- [ ] è®¾ç½® Git Hooks (husky)

### é˜¶æ®µ3: å®¹å™¨åŒ– (1-2å¤©)
- [ ] åˆ›å»º Docker é…ç½®
- [ ] è®¾ç½® docker-compose å¼€å‘ç¯å¢ƒ
- [ ] é…ç½®ç¯å¢ƒå˜é‡ç®¡ç†

### é˜¶æ®µ4: CI/CD (2-3å¤©)
- [ ] è®¾ç½® GitHub Actions
- [ ] é…ç½®è‡ªåŠ¨æµ‹è¯•
- [ ] è®¾ç½®è‡ªåŠ¨éƒ¨ç½²
- [ ] æ·»åŠ æ€§èƒ½ç›‘æ§

## ğŸ’¡ **å…·ä½“å»ºè®®**

### ç«‹å³å¯ä»¥åšçš„ (ä»Šå¤©):
1. å‡çº§ Vite é…ç½® (æå‡çƒ­æ›´æ–°é€Ÿåº¦)
2. æ·»åŠ  ESLint è‡ªåŠ¨æ ¼å¼åŒ–
3. é…ç½® VS Code å¼€å‘ç¯å¢ƒ

### æœ¬å‘¨å¯ä»¥åšçš„:
1. å¼•å…¥ TypeScript ä¸¥æ ¼æ¨¡å¼
2. æ·»åŠ å•å…ƒæµ‹è¯•
3. è®¾ç½® Git Hooks ä»£ç è´¨é‡æ£€æŸ¥

### ä¸‹å‘¨å¯ä»¥åšçš„:
1. é…ç½® Docker å¼€å‘ç¯å¢ƒ
2. è®¾ç½® CI/CD è‡ªåŠ¨åŒ–éƒ¨ç½²
3. æ·»åŠ æ€§èƒ½ç›‘æ§

## ğŸ‰ **æ€»ç»“**

å½“å‰çš„é…ç½®æ˜¯**åˆç†çš„èµ·ç‚¹**ï¼Œä½†æœ‰å¾ˆå¤§çš„**ä¼˜åŒ–ç©ºé—´**ã€‚ç°ä»£å‰ç«¯å¼€å‘åº”è¯¥è¿½æ±‚ï¼š

- âš¡ **æé€Ÿçš„çƒ­æ›´æ–°ä½“éªŒ**
- ğŸ”§ **å¼ºå¤§çš„å¼€å‘å·¥å…·é“¾**
- ğŸš€ **è‡ªåŠ¨åŒ–çš„æ„å»ºéƒ¨ç½²**
- ğŸ“Š **å®Œå–„çš„ç›‘æ§ä½“ç³»**

ä½ æƒ³ä»å“ªä¸ªæ–¹é¢å¼€å§‹å‡çº§å‘¢ï¼Ÿ 